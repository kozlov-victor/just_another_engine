<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="../../engine/js/lib/oop.js"></script>
    <script type="text/javascript" src="../../engine/js/data/data.js"></script>
    <script type="text/javascript" src="../../engine/js/lib/JAE_CORE.js"></script>
    <script type="text/javascript" src="../../engine/js/lib/JAE_ENGINE.js"></script>
    <link type="text/css" rel="stylesheet" href="../../engine/css/common.css">

</head>
<body>
<script type="text/javascript">

    ENGINE.SceneManager.setIdealScreenSize(800, 480);
    var BASE_URL = GLOBAL.BASE_URL + 'projects/spaceShooter/res/';

    var scene = new ENGINE.Scene();
    ENGINE.GAMEPAD.init(scene);
    var ship = new ENGINE.GameObject(BASE_URL + 'ship.png', scene, {showEmmediatly:1});
    var particlesEngine = new ENGINE.ParticleSystem(
            {
                strUrl: BASE_URL +'particle.png',
                scene : scene,
                compositeOperation: ENGINE.COMPOSITE_OPERATIONS.LIGHTER,
                force: 5,
                posDispersion: 0.01,
                alpha: Math.PI,
                timeOfParticleLiveMlsc: 100,
                mass: 1
            }
    );
    scene.onKeyDown(function (code) {
        //console.log('pressed any key', code);
    });
    scene.
            onKeyDown(ENGINE.KEYS.KEY_DOWN,function () {
                ship.setVy(0.1);
            }).onKeyUp(ENGINE.KEYS.KEY_DOWN, function () {
                ship.setVy(0);
            });

    scene.
            onKeyDown(ENGINE.KEYS.KEY_UP,function () {
                ship.setVy(-0.1);
            }).onKeyUp(ENGINE.KEYS.KEY_UP, function () {
                ship.setVy(0);
            });

    scene.
            onKeyDown(ENGINE.KEYS.KEY_LEFT,function () {
                ship.setVx(-0.1);
            }).onKeyUp(ENGINE.KEYS.KEY_LEFT, function () {
                ship.setVx(0);
            });

    scene.
            onKeyDown(ENGINE.KEYS.KEY_RIGHT,function () {
                ship.setVx(0.1);
            }).onKeyUp(ENGINE.KEYS.KEY_RIGHT, function () {
                ship.setVx(0);
            });

    ENGINE.SceneManager.onComplete(function () {
        setInterval(function(){
            particlesEngine.splash(ship.getPosX(),ship.getPosY()+35);
        },60);
    });

</script>
</body>
</html>
